---
import BaseLayout from '../../layouts/BaseLayout.astro';
import LearningPath from '../../components/LearningPath.astro';
import TutorialCard from '../../components/TutorialCard.astro';
import { getCollection } from 'astro:content';

// Get all CSS tutorials
const cssTutorials = await getCollection('css-tutorials');
const publishedTutorials = cssTutorials.filter(tutorial => tutorial.data.published);
---

<BaseLayout 
  title="CSS Tutorials - Web Tutorials" 
  description="Learn CSS with our comprehensive tutorials. Master styling and layout for modern web applications."
>
  <div class="container">
    <!-- Category header -->
    <div class="category-header">
      <h1>ðŸŽ¨ CSS Tutorials</h1>
      <p>Master the styling language of the web. Learn how to create beautiful, responsive designs with our comprehensive CSS tutorials.</p>
    </div>

    <!-- Learning Path -->
    <LearningPath 
      courseName="CSS"
      courseIcon="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/css3/css3-original.svg"
      courseColor="#1572b6"
      collectionName="css-tutorials"
    />

    <!-- Search and filters -->
    <div class="search-filters">
      <input type="text" class="search-input" placeholder="Search CSS tutorials..." id="searchInput">
      <select class="filter-select" id="difficultyFilter">
        <option value="">All Levels</option>
        <option value="beginner">Beginner</option>
        <option value="intermediate">Intermediate</option>
        <option value="advanced">Advanced</option>
      </select>
      <select class="filter-select" id="topicFilter">
        <option value="">All Topics</option>
        <option value="basics">Basics</option>
        <option value="layout">Layout</option>
        <option value="animations">Animations</option>
        <option value="responsive">Responsive</option>
      </select>
    </div>

    <!-- Articles grid -->
    <div class="article-grid" id="articleGrid">
      {publishedTutorials.map((tutorial) => (
        <TutorialCard
          title={tutorial.data.title}
          description={tutorial.data.description}
          difficulty={tutorial.data.difficulty}
          readTime={tutorial.data.readTime}
          slug={tutorial.slug}
          tags={tutorial.data.tags}
          category="CSS"
        />
      ))}
    </div>

    <!-- Pagination -->
    <div class="pagination">
      <a href="#" class="disabled">&laquo; Previous</a>
      <span class="current">1</span>
      <a href="#">2</a>
      <a href="#">3</a>
      <a href="#">Next &raquo;</a>
    </div>
  </div>

  <script>
    // Simple search and filter functionality
    document.addEventListener('DOMContentLoaded', function() {
      const searchInput = document.getElementById('searchInput');
      const difficultyFilter = document.getElementById('difficultyFilter');
      const topicFilter = document.getElementById('topicFilter');
      const articleGrid = document.getElementById('articleGrid');
      const articles = articleGrid.querySelectorAll('.article-card');

      function filterArticles() {
        const searchTerm = searchInput.value.toLowerCase();
        const difficulty = difficultyFilter.value;
        const topic = topicFilter.value;

        articles.forEach(article => {
          const title = article.querySelector('h3 a').textContent.toLowerCase();
          const description = article.querySelector('p').textContent.toLowerCase();
          const articleDifficulty = article.dataset.difficulty;
          const articleTopic = article.dataset.topic;

          const matchesSearch = title.includes(searchTerm) || description.includes(searchTerm);
          const matchesDifficulty = !difficulty || articleDifficulty === difficulty;
          const matchesTopic = !topic || articleTopic === topic;

          if (matchesSearch && matchesDifficulty && matchesTopic) {
            article.style.display = 'block';
          } else {
            article.style.display = 'none';
          }
        });
      }

      searchInput.addEventListener('input', filterArticles);
      difficultyFilter.addEventListener('change', filterArticles);
      topicFilter.addEventListener('change', filterArticles);
    });
  </script>
</BaseLayout>
